"use client";

import {
  AutumnContext,
  useAutumnContext
} from "./chunk-4XXJ4V7H.mjs";
import {
  AutumnError
} from "./chunk-AOH5T4UB.mjs";

// src/libraries/react/hooks/useAnalytics.tsx
import useSWR from "swr";
var useAnalytics = (params) => {
  const context = useAutumnContext({
    AutumnContext,
    name: "useAnalytics"
  });
  const client = context.client;
  const fetcher = async () => {
    try {
      const { data: data2, error: error2 } = await client.query(params);
      if (error2) throw error2;
      return data2;
    } catch (error2) {
      throw new AutumnError({
        message: "Failed to fetch analytics",
        code: "fetch_analytics_failed"
      });
    }
  };
  const { data, error, mutate } = useSWR(
    ["analytics", params.featureId, params.range],
    fetcher,
    { refreshInterval: 0 }
  );
  return {
    data: data?.list,
    isLoading: !error && !data,
    error,
    refetch: mutate
  };
};

export {
  useAnalytics
};
