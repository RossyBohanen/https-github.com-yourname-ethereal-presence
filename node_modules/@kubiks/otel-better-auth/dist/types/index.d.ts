import { type Tracer } from "@opentelemetry/api";
import type { Auth, BetterAuthPlugin } from "better-auth";
export declare const SEMATTRS_AUTH_OPERATION = "auth.operation";
export declare const SEMATTRS_AUTH_METHOD = "auth.method";
export declare const SEMATTRS_AUTH_PROVIDER = "auth.provider";
export declare const SEMATTRS_USER_ID = "user.id";
export declare const SEMATTRS_USER_EMAIL = "user.email";
export declare const SEMATTRS_SESSION_ID = "session.id";
export declare const SEMATTRS_AUTH_SUCCESS = "auth.success";
export declare const SEMATTRS_AUTH_ERROR = "auth.error";
/**
 * Configuration options for Better Auth OpenTelemetry instrumentation.
 */
export interface InstrumentBetterAuthConfig {
    /**
     * Custom tracer name. Defaults to "@kubiks/otel-better-auth".
     */
    tracerName?: string;
    /**
     * Custom tracer instance. If not provided, will use trace.getTracer().
     */
    tracer?: Tracer;
}
type AnyAuth = Auth<any>;
/**
 * Instruments a Better Auth instance with OpenTelemetry tracing.
 *
 * This function wraps all Better Auth API methods (api.getSession, api.signInEmail, etc.)
 * to automatically create spans for each auth operation. It captures user IDs,
 * session IDs, and auth status in span attributes.
 *
 * The instrumentation is idempotent - calling it multiple times on the same
 * instance will only instrument it once.
 *
 * @param auth - The Better Auth instance to instrument
 * @param config - Optional configuration for instrumentation behavior
 * @returns The instrumented auth instance (same instance, modified in place)
 *
 * @example
 * ```typescript
 * import { betterAuth } from "better-auth";
 * import { instrumentBetterAuth } from "@kubiks/otel-better-auth";
 *
 * export const auth = instrumentBetterAuth(betterAuth({
 *   database: db,
 *   // ... your Better Auth config
 * }));
 *
 * // Direct API calls are traced automatically:
 * await auth.api.getSession({ headers });
 * ```
 */
export declare function instrumentBetterAuth<TAuth extends AnyAuth>(auth: TAuth, config?: InstrumentBetterAuthConfig): TAuth;
/**
 * Creates a Better Auth plugin that adds OpenTelemetry tracing to HTTP requests.
 *
 * This plugin hooks into the Better Auth request/response lifecycle to trace
 * all authentication operations, including OAuth callbacks and social sign-ins.
 *
 * Use this in addition to `instrumentBetterAuth()` for comprehensive tracing:
 * - The plugin traces HTTP-level operations (OAuth callbacks, etc.)
 * - `instrumentBetterAuth()` traces direct API method calls
 *
 * @param config - Optional configuration for instrumentation behavior
 * @returns A Better Auth plugin that can be added via the plugins array
 *
 * @example
 * ```typescript
 * import { betterAuth } from "better-auth";
 * import { otelPlugin } from "@kubiks/otel-better-auth";
 *
 * export const auth = betterAuth({
 *   database: db,
 *   plugins: [otelPlugin()],
 * });
 * ```
 */
export declare function otelPlugin(config?: InstrumentBetterAuthConfig): BetterAuthPlugin;
export {};
//# sourceMappingURL=index.d.ts.map